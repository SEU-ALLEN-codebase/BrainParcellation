# Auto-tracing for 200K neurons

### Data and codes
#### Local repository: /PB/SEU-ALLEN/Users/Sujun/230k_organized_folder
```
|-- 230k_organized_folder/
    |-- app2/                       # Reconstructions (`SWC` generated by APP2) [all, ~230K]
    |-- v3dpbd/                     # Soma-centered image blocks (1024x1024x256 voxel**3) [all, 230K]
    |-- mip/                        # MIP image of blocks (in `TIF`) [all, ~230K]
    |-- mip_swc/                    # MIP image with reconstruction overlaid [all, ~230K]
    |-- pruned_pre_registered/      # Post-processed reconstructions (`SWC`). [~200K]
    |-- 179k_CCFv3_25um_raw/        # Filtered reconstructions (`SWC`), in isotropic 25um CCFv3 space. [179K]
    |-- cropped_100um/              # Spherically cropped reconstructions, with radius = 100um [179568]
    |-- Code
        |-- filter.py               # Image preprocessing and enhancing script
        |-- filter-job.sh           # Job schedular for `filter.py`
        |-- recon-job.sh            # Batch runner of APP2 tracing
        |-- soma_finder.py          # Script for soma position extraction
        |-- prune-job.sh            # Script for morphology pruning (e.g., short segments, multifurcations, errorous
        |                           #   with small angles)
        |-- seg_prune.py            # Pruning methods
    |-- supp.csv                    # Meta information of brains
    |-- analysis
        |-- comparison_with_1876.py # script for comparison with gold standard dataset [1876]
        |-- gf_179k_crop.csv        # L-measure(22 features) table for r=100um cropped sphere
        |-- gf_1876_crop.csv        
```

### Reconstruction Examples (2D image)
<div class="1" align='center'>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/mip_examples/5749_4916_4542.png" width=200/><b>  <b/>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/mip_examples/5996_8205_3698.png" width=200/><b>  <b/>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/mip_examples/9517_8249_6626.png" width=200/><b>  <b/>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/mip_examples/9970_10457_5550.png" width=200/>
</div>
<div class="2" align='center'>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/mip_examples/17601_2198_4862.png" width=200/><b>  <b/>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/mip_examples/19014_2874_4233.png" width=200/><b>  <b/>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/mip_examples/19014_2874_4233.png" width=200/><b>  <b/>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/mip_examples/23627_4542_5025.png" width=200/>
</div>


### Characteristic Distribution compared with 1876(gold standard) dataset
<h3> Table for Structure Similarity </h3>
<table border = "1.5" width="600px" cellspacing = 10 align = "center">
    <tr>
        <th align = "center"> Indicator</th>
        <th align = "center"> Value</th>
    </tr>
    <tr>
        <th align = "center"> Bi-directional entire structure median distance (&#956;m) </th>
        <th align = "center"> 5.846</th>
    </tr>
</table>
<div align='center'>
    <img src="https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/median_structure_similarity.png">
</div>


##### Comment: Average parent-daughter ratio of 1876 dataset is 1.0

![image](https://github.com/SEU-ALLEN-codebase/BrainParcellation/blob/main/reconstruction/figures/1876_comparison.png)
